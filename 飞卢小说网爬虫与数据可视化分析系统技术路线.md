# 飞卢小说网爬虫与数据可视化分析系统技术路线

## 整体架构

该项目是一个完整的数据采集、存储和可视化分析系统，主要由以下几个核心部分组成：

1. **数据采集层**：基于Scrapy框架的爬虫系统
2. **数据存储层**：支持MySQL和SQLite的数据库存储方案
3. **数据分析层**：使用Pandas和Matplotlib进行数据处理和可视化
4. **Web展示层**：基于Flask的Web应用和前端可视化界面

## 技术栈详解

### 1. 数据采集层

- **核心框架**：Scrapy爬虫框架
- **爬虫实现**：`Feilu/spiders/books.py`中的`BooksSpider`类
- **数据项定义**：`Feilu/items.py`中的`FeiluItem`类
- **爬虫配置**：`Feilu/settings.py`中的爬虫设置
- **主要功能**：
  - 从飞卢小说网抓取小说信息（标题、作者、点击量、字数等）
  - 下载小说封面图片
  - 支持分页爬取和最大页数限制
  - 提取小说详情页的标签、评分、鲜花数等信息

### 2. 数据存储层

- **数据库选项**：
  - **MySQL**：通过`mysql_pipeline.py`实现数据存储
  - **SQLite**：通过`db_pipeline.py`实现数据存储（可选）
- **数据表结构**：
  - `books`表：存储小说基本信息
  - `tags`表：存储标签信息
  - `book_tags`表：存储小说与标签的关联关系
  - `images`表：存储图片信息
- **数据处理管道**：
  - `FeiluImagesPipeline`：处理图片下载
  - `FeiluPipeline`：基础数据处理
  - `FeiluMySQLPipeline`：MySQL数据存储

### 3. 数据分析层

- **核心技术**：
  - **Pandas**：数据处理和分析
  - **Matplotlib/Seaborn**：数据可视化
  - **NumPy**：数学计算
- **主要分析内容**：
  - 月点击量与评分关系分析
  - 字数与受欢迎程度分析
  - 标签分布统计
  - 鲜花与评分关系分析
  - 打赏与点击量关系分析
  - 热门作者统计
- **实现文件**：`analyze_books.py`

### 4. Web展示层

- **后端框架**：Flask
- **前端技术**：
  - **Bootstrap**：页面布局和样式
  - **ECharts**：交互式数据可视化图表
  - **JavaScript**：前端交互逻辑
- **主要功能模块**：
  - 数据概览：展示关键统计数据
  - 小说列表：分页展示所有小说信息
  - 数据分析：展示各类数据分析图表
- **实现文件**：
  - 后端：`app.py`
  - 前端模板：`templates/index.html`
  - 前端脚本：`static/js/main.js`

## 数据流转过程

1. **数据采集**：Scrapy爬虫从飞卢小说网抓取数据
2. **数据存储**：通过Pipeline将数据存入MySQL/SQLite数据库
3. **数据分析**：使用`analyze_books.py`对数据进行分析并生成可视化图表
4. **数据展示**：Flask应用从数据库读取数据，通过Web界面展示给用户

## 可视化界面实现

- **页面结构**：
  - 导航栏：数据概览、小说列表、数据分析
  - 数据概览：总小说数、总标签数、平均评分、最高点击量
  - 小说列表：表格形式展示小说信息，支持分页
  - 数据分析：多种图表展示数据分析结果
- **图表类型**：
  - 标签分布图：展示最受欢迎的小说类型
  - 评分分布图：展示小说评分分布情况
  - 热门作者图：展示最活跃的作者
  - 点击量与评分关系图：分析点击量与评分的相关性
  - 字数与点击量关系图：分析字数与受欢迎程度的关系
  - 鲜花与评分关系图：分析鲜花数与评分的关系
- **数据交互**：通过Flask提供的API接口获取数据，使用ECharts实现前端可视化

## 项目依赖

主要依赖包括：
- Flask 2.0.1：Web应用框架
- PyMySQL 1.0.3：MySQL数据库连接
- Pandas 1.3.0：数据分析
- NumPy 1.19.5：数值计算
- Scrapy：爬虫框架
- Matplotlib/Seaborn：数据可视化

